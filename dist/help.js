System.register("src/styles.css!github:systemjs/plugin-css@0.1.19",[],function(){return{setters:[],execute:function(){}}}),System.register("src/help.js",["src/styles.css!github:systemjs/plugin-css@0.1.19"],function(a){"use strict";var b,c,d,e,f,g;return{setters:[function(a){}],execute:function(){b="index.md",c=function(a,c){return{showPanel:!1,panelTitle:"Help",showSearch:!0,showResults:!1,contentHTML:"",searchResults:[],language:"en",api:"/api",query:"",navStack:[],currentPage:{type:"page",data:b},setCurrentPage:function(a){console.log("add",this.navStack,a),this.navStack.push(this.currentPage),this.currentPage=a},getBack:function(){return this.navStack.pop()},showBack:function(){return!!this.currentPage.data},getContent:function(d){var e=this;d&&d!==b||(d=b,this.searchResults.length=0,this.navStack.length=0,this.currentPage=""),a.get(this.api+"/help/"+this.language+"/"+d).then(function(a){e.showSearch=d===b,e.showResults=!1,e.contentHTML=c.trustAsHtml(a.data)},function(a){console.log(a)})},getSearch:function(b){var c=this;a.post(this.api+"/help/search",{lang:this.language,criteria:b}).then(function(a){c.showResults=!0,c.searchResults=a.data},function(a){console.log(a)})},closePanel:function(a){this.navStack.length=0,a.stopImmediatePropagation(),this.showPanel=!1},togglePanel:function(){this.showPanel=!this.showPanel},contextualOpen:function(a){this.searchResults.length=0,this.showPanel=!0,this.getContent(a)}}},d=function(a){return{restrict:"A",scope:{dHelpDisplay:"@dHelpDisplay"},link:function(b,c){c.on("click",function(c){c.stopImmediatePropagation(),a.contextualOpen(b.dHelpDisplay)}),b.$on("$destroy",function(){c.unbind("click")})}}},e=function(a){return{restrict:"A",scope:!1,link:function(b,c){c.on("click",function(c){c.stopImmediatePropagation(),b.$applyAsync(function(){a.togglePanel()})}),b.$on("$destroy",function(){c.unbind("click")})}}},f="dHelp",g=function(a){return{controllerAs:"ctrl",controller:function(){return{searchString:"",HelpService:a,backHandler:function(c){c.stopImmediatePropagation();var d=a.getBack();d?(console.log(a.navStack),console.log("back",d.data),"search"===d.type?(a.showSearch=!0,a.showResults=!0,a.getSearch(d.data)):a.getContent(d.data)):a.getContent(b)},contentClickHandler:function(b){b.stopImmediatePropagation();var c=b.target.dataset.link;return c&&(a.setCurrentPage({type:"page",data:c}),a.getContent(c)),!1},searchAction:function(b){b.stopImmediatePropagation(),a.setCurrentPage({type:"search",data:this.searchString}),a.getSearch(this.searchString)},init:function(){this.searchString="",a.language=this.lang,a.api=this.api,a.navStack.length=0,a.getContent(b)}}},bindToController:{lang:"=lang",api:"=api"},scope:{},link:function(a,b,c,d){b.addClass(_.kebabCase(f)),d.init()},template:'\n     <div class="help-wrapper" ng-if="ctrl.HelpService.showPanel">\n         <header>\n           <ul>\n             <li><h2><a ng-click="ctrl.init()" aria-label="Help Index">{{ctrl.HelpService.panelTitle}}</a></h2></li>\n             <li ng-show="ctrl.HelpService.showBack()">\n              <a class="back" ng-click="ctrl.backHandler($event)" aria-label="Back to previous page"></a>\n             </li>\n             <li><a class="close" ng-click="ctrl.HelpService.closePanel($event)" aria-label="Close Help"></a></li>\n           </ul>\n         </header>\n         <help-content d-trap-scroll>\n            <section role="search" ng-if="ctrl.HelpService.showSearch">\n                <input type="search" ng-model="ctrl.searchString" />\n                <button type="button" ng-click="ctrl.searchAction($event)" ng-disabled="!ctrl.searchString">Search</button>\n            </section>\n            <main ng-click="ctrl.contentClickHandler($event)" ng-switch="ctrl.HelpService.showResults">\n              <div ng-switch-when="false" ng-bind-html="ctrl.HelpService.contentHTML"></div>\n              <div ng-switch-when="true" class="help-content item-list">\n              <ul ng-switch="!!ctrl.HelpService.searchResults.length">\n                <li ng-switch-when="true" ng-repeat="result in ctrl.HelpService.searchResults">\n                  <a data-link="{{result.id}}">{{result.title}}</a>\n                </li>\n                <li ng-switch-when="false">No results</li>\n              </ul>\n              </div>\n            </main>\n         </help-content>\n     </div>'}},a("default",angular.module("app.component.help",[]).service("HelpService",["$http","$sce",c]).directive("dHelpDisplay",["HelpService",d]).directive("dHelpToggle",["HelpService",e]).directive(f,["HelpService",g]).name)}}}),System.register("src/styles.css!github:systemjs/plugin-css@0.1.19",[],!1,function(){}),function(a){if("undefined"!=typeof document){var b=document,c="appendChild",d="styleSheet",e=b.createElement("style");e.type="text/css",b.getElementsByTagName("head")[0][c](e),e[d]?e[d].cssText=a:e[c](b.createTextNode(a))}}('.d-help .help-wrapper{position:fixed;top:56px;right:0;bottom:0;width:710px;background:#f7f7f7;overflow:hidden;z-index:20!important;box-shadow:0 3px 5px -1px rgba(0,0,0,.14),0 6px 10px 0 rgba(0,0,0,.098),0 1px 18px 0 rgba(0,0,0,.084)}.d-help .help-wrapper header{position:absolute;top:0;width:710px;height:48px;background:#fff;border-bottom:2px solid #e4e4e4;z-index:5}.d-help .help-wrapper header ul{display:table;width:100%;margin:0;padding:0}.d-help .help-wrapper header ul li{display:table-cell;padding:0 8px}.d-help .help-wrapper header ul li:first-child{width:100%}.d-help .help-wrapper header ul li:last-child{padding-right:16px}.d-help .help-wrapper header h2{float:left;margin:0 0 0 8px;padding:0;color:#878787;font-size:18px;font-weight:400;line-height:48px}.d-help .help-wrapper header h2 a{cursor:pointer;color:#878787;text-decoration:none}.d-help .help-wrapper header .back,.d-help .help-wrapper header .close{display:block;float:right;width:24px;height:24px;margin:12px 0;line-height:48px}.d-help .help-wrapper header .back:hover,.d-help .help-wrapper header .close:hover{cursor:pointer}.d-help .help-wrapper header .close{background:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="#878787" height="24" viewBox="0 0 24 24" width="24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\') no-repeat}.d-help .help-wrapper header .back{background:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="#878787" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>\') no-repeat}.d-help .help-wrapper help-content{position:absolute;top:48px;right:-16px;width:calc(100% + 16px);height:calc(100% - 48px);overflow-y:scroll;overflow-x:hidden}.d-help .help-wrapper help-content section[role=search]{position:relative;width:100%;background:#f7f7f7;border-bottom:1px solid #e5e5e5}.d-help .help-wrapper help-content section[role=search] input{box-sizing:border-box;width:678px;height:32px;margin:16px 0 16px 16px;padding:4px 8px;background:rgba(85,173,224,.05);border:1px solid #d7d7d7;color:#373737}.d-help .help-wrapper help-content section[role=search] button{position:absolute;right:22px;top:20px;height:24px;padding:2px 8px;font-size:12px;font-weight:600;color:#fff;text-transform:uppercase;background:#55798d;border:none}.d-help .help-wrapper help-content section[role=search] button:disabled{color:#989898;background:#ccc}.d-help .help-wrapper help-content main{position:relative;float:left;box-sizing:border-box;width:100%;padding:8px 16px}.d-help .help-wrapper help-content main .help-content,.d-help .help-wrapper help-content main .help-content li,.d-help .help-wrapper help-content main .help-content p{color:#676767}.d-help .help-wrapper help-content main .help-content h1,.d-help .help-wrapper help-content main .help-content h2,.d-help .help-wrapper help-content main .help-content h3,.d-help .help-wrapper help-content main .help-content h4{color:#55798d;font-weight:400;line-height:1.2rem;margin:16px 0}.d-help .help-wrapper help-content main .help-content h1{font-size:28px;line-height:1.5rem;margin:1rem 0 .2rem}.d-help .help-wrapper help-content main .help-content h2{font-size:22px;margin:2.5rem 0 .5rem}.d-help .help-wrapper help-content main .help-content h3{font-size:18px;margin:2.5rem 0 .5rem}.d-help .help-wrapper help-content main .help-content h4{line-height:1rem;font-size:18px;margin:2rem 0 .2rem}.d-help .help-wrapper help-content main .help-content h5,.d-help .help-wrapper help-content main .help-content h6{color:#676767;font-weight:600;line-height:1.2rem}.d-help .help-wrapper help-content main .help-content h5{font-size:16px;margin:16px 0 0}.d-help .help-wrapper help-content main .help-content h6{font-size:14px;text-transform:uppercase;margin:32px 0 0}.d-help .help-wrapper help-content main .help-content li{line-height:1.5rem}.d-help .help-wrapper help-content main .help-content li a,.d-help .help-wrapper help-content main .help-content li a:link,.d-help .help-wrapper help-content main .help-content li a:visited{color:#55798d;cursor:pointer}.d-help .help-wrapper help-content main .help-content li a:hover{color:#55ade0;text-decoration:underline}.d-help .help-wrapper help-content main .help-content li a:active{color:#55ade0}.d-help .help-wrapper help-content main .help-content.item-list h2{color:#878787;font-size:18px;margin:8px 0 12px}.d-help .help-wrapper help-content main .help-content.item-list ul{margin:0 0 32px;padding:0}.d-help .help-wrapper help-content main .help-content.item-list ul li{list-style:none;margin:0;padding:0;border-bottom:1px solid #eaeaea;font-size:16px;line-height:2rem}.d-help .help-wrapper help-content main .help-content.item-list ul li a,.d-help .help-wrapper help-content main .help-content.item-list ul li a:link,.d-help .help-wrapper help-content main .help-content.item-list ul li a:visited{color:#55798d}.d-help .help-wrapper help-content main .help-content.item-list ul li a:hover{color:#55ade0;cursor:pointer}.d-help .help-wrapper help-content main .help-content.item-list ul li a:active{color:#55ade0}.d-help .help-wrapper help-content main .help-content img{max-width:100%;border:1px solid #d7d7d7}.d-help .help-wrapper help-content main .help-content img[src*="/icons/"]{margin-bottom:-6px;border:none}.d-help .help-wrapper help-content main .help-content table{border-collapse:collapse;width:100%}.d-help .help-wrapper help-content main .help-content table thead tr{border-top:2px solid #d7d7d7;border-bottom:2px solid #d7d7d7}.d-help .help-wrapper help-content main .help-content table thead th{color:#676767;font-size:12px;font-weight:600;text-transform:uppercase;text-align:left;padding:8px}.d-help .help-wrapper help-content main .help-content table tbody tr:last-child{border-bottom:2px solid #d7d7d7}.d-help .help-wrapper help-content main .help-content table tbody td{padding:4px 8px}');